{
  "openapi": "3.0.0",
  "info": {
    "version": "v1.0",
    "title": "Tripsha API documentation",
    "description": "This is complete API documentation of all the API",
    "termsOfService": "https://tripsha.com/terms/",
    "contact": {
      "name": "Tripsha API Team",
      "email": "madanesanjay@yahoo.com",
      "url": "https://tripsha.com"
    }
  },
  "servers": [
    {
      "url": "https://toavs4nqf6.execute-api.us-east-1.amazonaws.com/dev"
    },
    {
      "url": "http://localhost:3000"
    }
  ],
  "components": {
    "schemas": {
      "CountryModel": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Code of the country"
          },
          "name": {
            "type": "string",
            "description": "Name of country"
          }
        }
      },
      "MessageModel": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "toMemberId": {
            "type": "string",
            "description": "user id of receiver"
          },
          "fromMemberId": {
            "type": "string",
            "description": "user id of sender"
          },
          "sentOn": {
            "type": "string",
            "format": "utc datetime"
          },
          "message": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["text"]
          }
        }
      },
      "MyTripModel": {
        "type": "object",
        "properties": {
          "tripId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "utc datetime"
          },
          "isFavorite": {
            "type": "boolean"
          },
          "isMember": {
            "type": "boolean"
          },
          "memberStatus": {
            "type": "string"
          }
        }
      },
      "CommonErrorFormat": {
        "type": "object",
        "required": ["status", "result"],
        "properties": {
          "status": {
            "type": "string",
            "default": "error"
          },
          "result": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["errorCode", "message"],
              "properties": {
                "errorCode": {
                  "type": "string",
                  "description": "Error code to handle internationalization(i18)"
                },
                "message": {
                  "type": "string",
                  "description": "Error message in english"
                },
                "field": {
                  "type": "string",
                  "description": "Error field name"
                }
              }
            }
          }
        }
      },
      "CommonSuccessFormat": {
        "type": "object",
        "required": ["status", "result"],
        "properties": {
          "status": {
            "type": "string",
            "default": "success"
          },
          "result": {
            "type": "string",
            "default": "success"
          }
        }
      },
      "TagModel": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the tag"
          },
          "isVerified": {
            "type": "boolean"
          }
        }
      },
      "TripModel": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "startDate": {
            "type": "string",
            "format": "utc datetime"
          },
          "endDate": {
            "type": "string",
            "format": "utc datetime"
          },
          "languages": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["english"]
            }
          },
          "budgets": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "groupSize": {
            "type": "integer"
          },
          "interests": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "utc datetime"
          },
          "updatedAt": {
            "type": "string",
            "format": "utc datetime"
          },
          "userId": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "isArchived": {
            "type": "boolean"
          }
        }
      },
      "UserModel": {
        "type": "object",
        "required": ["username", "email"],
        "properties": {
          "id": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "dob": {
            "type": "string",
            "format": "date"
          },
          "currentCity": {
            "type": "string"
          },
          "gender": {
            "type": "string",
            "enum": ["male", "female", "other"]
          },
          "spokenLanguages": {
            "type": "array",
            "description": "List of languages user can speak",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "level": {
                  "type": "string"
                }
              }
            }
          },
          "bio": {
            "type": "string"
          },
          "isLookingForTravel": {
            "type": "boolean"
          },
          "avatarUrl": {
            "type": "string"
          },
          "socialConnections": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "details": {
                  "type": "string"
                }
              },
              "description": "Social media connection object"
            }
          },
          "interests": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "countryInterests": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "utc date"
          },
          "updatedAt": {
            "type": "string",
            "format": "utc date"
          }
        }
      },
      "CreateUpdateTrip": {
        "properties": {
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "groupSize": {
            "type": "number"
          },
          "startDate": {
            "type": "string",
            "format": "utc datetime"
          },
          "endDate": {
            "type": "string",
            "format": "utc datetime"
          },
          "languages": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["english"]
            }
          },
          "budgets": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "interests": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isActive": {
            "type": "boolean"
          }
        }
      }
    },
    "parameters": {
      "pathUserId": {
        "name": "userId",
        "in": "path",
        "description": "Id of the user",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "pathTripId": {
        "name": "tripId",
        "in": "path",
        "description": "Id of the trip",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "queryUserId": {
        "name": "userId",
        "in": "query",
        "description": "Id of the user",
        "schema": {
          "type": "string"
        }
      },
      "queryLimit": {
        "name": "limit",
        "in": "query",
        "description": "No of records per page",
        "schema": {
          "type": "string",
          "default": 25
        }
      },
      "queryPage": {
        "name": "page",
        "in": "query",
        "description": "Page number",
        "schema": {
          "type": "string",
          "default": 1
        }
      },
      "querySortBy": {
        "name": "sortBy",
        "in": "query",
        "description": "Name of the field to sort",
        "schema": {
          "type": "string",
          "default": "firstName"
        }
      },
      "querySortOrder": {
        "name": "sortOrder",
        "in": "query",
        "description": "Sort order",
        "schema": {
          "type": "number",
          "enum": [1, -1],
          "default": -1
        }
      },
      "querySearch": {
        "name": "search",
        "in": "query",
        "description": "Search filter",
        "schema": {
          "type": "string"
        }
      },
      "createTrip": {
        "in": "body",
        "name": "body",
        "description": "Create trip payload",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/CreateUpdateTrip"
        }
      },
      "updateTrip": {
        "in": "body",
        "name": "body",
        "description": "Update trip payload",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/CreateUpdateTrip"
        }
      },
      "createUser": {
        "in": "body",
        "name": "body",
        "description": "Create user payload",
        "required": true,
        "schema": {
          "properties": {
            "username": {
              "type": "string"
            },
            "email": {
              "type": "string"
            },
            "firstName": {
              "type": "string"
            },
            "lastName": {
              "type": "string"
            }
          }
        }
      },
      "updateUser": {
        "in": "body",
        "name": "body",
        "description": "Update user payload",
        "required": true,
        "schema": {
          "properties": {
            "firstName": {
              "type": "string"
            },
            "lastName": {
              "type": "string"
            },
            "dob": {
              "type": "string",
              "format": "date"
            },
            "currentCity": {
              "type": "string"
            },
            "gender": {
              "type": "string",
              "enum": ["male", "female", "other"]
            },
            "spokenLanguages": {
              "type": "array",
              "description": "List of languages user can speak",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "level": {
                    "type": "string"
                  }
                }
              }
            },
            "bio": {
              "type": "string"
            },
            "isLookingForTravel": {
              "type": "boolean"
            },
            "avatarUrl": {
              "type": "string"
            },
            "socialConnections": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "details": {
                    "type": "string"
                  }
                },
                "description": "Social media connection object"
              }
            },
            "interests": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "countryInterests": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "isActive": {
              "type": "boolean"
            }
          }
        }
      }
    },
    "securitySchemes": {
      "api_key": {
        "type": "apiKey",
        "name": "api_key",
        "in": "header"
      }
    },
    "examples": {
      "trip-error": {
        "status": "error",
        "result": [
          {
            "type": "required",
            "message": "Title field is required",
            "field": "title"
          }
        ]
      }
    }
  },
  "paths": {
    "/public/countries": {
      "get": {
        "description": "Return list of matching countries",
        "operationId": "listCountries",
        "tags": ["Countries"],
        "parameters": [
          {
            "$ref": "#/components/parameters/querySearch"
          }
        ],
        "responses": {
          "200": {
            "description": "Countries response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["status", "result"],
                  "properties": {
                    "status": {
                      "type": "string",
                      "default": "success"
                    },
                    "result": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/CountryModel"
                          }
                        },
                        "nextPageToken": {
                          "type": "string",
                          "description": "End of the result this will not come, It will used to retrive next page data"
                        },
                        "count": {
                          "type": "number",
                          "description": "Count of the current records"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/tags": {
      "get": {
        "description": "Return list of matching interest tags",
        "operationId": "listTags",
        "tags": ["Tags"],
        "parameters": [
          {
            "$ref": "#/components/parameters/querySearch"
          }
        ],
        "responses": {
          "200": {
            "description": "Tags response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["status", "result"],
                  "properties": {
                    "status": {
                      "type": "string",
                      "default": "success"
                    },
                    "result": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/TagModel"
                          }
                        },
                        "nextPageToken": {
                          "type": "string",
                          "description": "End of the result this will not come, It will used to retrive next page data"
                        },
                        "count": {
                          "type": "number",
                          "description": "Count of the current records"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/trips": {
      "get": {
        "description": "Returns list of trips for anonymous user",
        "operationId": "publicListTrips",
        "tags": ["Public Trips"],
        "parameters": [
          {
            "$ref": "#/components/parameters/queryLimit"
          },
          {
            "$ref": "#/components/parameters/queryPage"
          },
          {
            "$ref": "#/components/parameters/querySortBy"
          },
          {
            "$ref": "#/components/parameters/querySortOrder"
          }
        ],
        "responses": {
          "200": {
            "description": "Trip response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["status", "result"],
                  "properties": {
                    "status": {
                      "type": "string",
                      "default": "success"
                    },
                    "result": {
                      "type": "object",
                      "properties": {
                        "totalCount": {
                          "type": "number",
                          "description": "Total number of records"
                        },
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/TripModel"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "examples": {
                  "error-examples": {
                    "$ref": "#/components/examples/trip-error"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Error Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      }
    },
    "/trips": {
      "get": {
        "description": "Returns list of trips",
        "operationId": "listTrips",
        "tags": ["Trips"],
        "parameters": [
          {
            "$ref": "#/components/parameters/queryLimit"
          },
          {
            "$ref": "#/components/parameters/queryPage"
          },
          {
            "$ref": "#/components/parameters/querySortBy"
          },
          {
            "$ref": "#/components/parameters/querySortOrder"
          }
        ],
        "responses": {
          "200": {
            "description": "Trip response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["status", "result"],
                  "properties": {
                    "status": {
                      "type": "string",
                      "default": "success"
                    },
                    "result": {
                      "type": "object",
                      "properties": {
                        "totalCount": {
                          "type": "number",
                          "description": "Total number of records"
                        },
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/TripModel"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "default": {
            "description": "Error Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Creates a trip",
        "operationId": "createTrip",
        "tags": ["Trips"],
        "parameters": [
          {
            "$ref": "#/components/parameters/createTrip"
          }
        ],
        "responses": {
          "200": {
            "description": "Trip response",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "status": {
                      "type": "string"
                    },
                    "result": {
                      "type": "string",
                      "description": "Trip id"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "description": "Error Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      }
    },
    "/trips/{tripId}": {
      "get": {
        "description": "Returns a trip based on a trip ID",
        "operationId": "findTripById",
        "tags": ["Trips"],
        "parameters": [
          {
            "$ref": "#/components/parameters/pathTripId"
          }
        ],
        "responses": {
          "200": {
            "description": "Trip response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["status", "result"],
                  "properties": {
                    "status": {
                      "type": "string",
                      "default": "success"
                    },
                    "result": {
                      "$ref": "#/components/schemas/TripModel"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "description": "Error Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      },
      "put": {
        "description": "Updates a single trip based on the ID supplied and data",
        "operationId": "updateTrip",
        "tags": ["Trips"],
        "parameters": [
          {
            "$ref": "#/components/parameters/pathTripId"
          },
          {
            "$ref": "#/components/parameters/updateTrip"
          }
        ],
        "responses": {
          "204": {
            "description": "Trip updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonSuccessFormat"
                }
              }
            }
          },
          "default": {
            "description": "Error Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "deletes a single trip based on the ID supplied",
        "operationId": "deleteTrip",
        "tags": ["Trips"],
        "parameters": [
          {
            "$ref": "#/components/parameters/pathTripId"
          }
        ],
        "responses": {
          "204": {
            "description": "Trip deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonSuccessFormat"
                }
              }
            }
          },
          "default": {
            "description": "Error Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "post": {
        "description": "Creates a user",
        "operationId": "createUser",
        "tags": ["Users"],
        "parameters": [
          {
            "$ref": "#/components/parameters/createUser"
          }
        ],
        "responses": {
          "200": {
            "description": "Create User response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["status", "result"],
                  "properties": {
                    "status": {
                      "type": "string",
                      "default": "success"
                    },
                    "result": {
                      "type": "string",
                      "default": "User id"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "description": "Error response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}": {
      "get": {
        "description": "Returns a user based on a user ID",
        "operationId": "findUserById",
        "tags": ["Users"],
        "parameters": [
          {
            "$ref": "#/components/parameters/pathUserId"
          }
        ],
        "responses": {
          "200": {
            "description": "User response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["status", "result"],
                  "properties": {
                    "status": {
                      "type": "string",
                      "default": "success"
                    },
                    "result": {
                      "$ref": "#/components/schemas/UserModel"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "description": "Error response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      },
      "put": {
        "description": "Updates a single user based on the ID supplied and data",
        "operationId": "updateUser",
        "tags": ["Users"],
        "parameters": [
          {
            "$ref": "#/components/parameters/pathUserId"
          },
          {
            "$ref": "#/components/parameters/updateUser"
          }
        ],
        "responses": {
          "204": {
            "description": "User updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonSuccessFormat"
                }
              }
            }
          },
          "default": {
            "description": "Error response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Deletes a single user based on the ID supplied",
        "operationId": "deleteUser",
        "tags": ["Users"],
        "parameters": [
          {
            "$ref": "#/components/parameters/pathUserId"
          }
        ],
        "responses": {
          "204": {
            "description": "User deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonSuccessFormat"
                }
              }
            }
          },
          "default": {
            "description": "Error response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommonErrorFormat"
                }
              }
            }
          }
        }
      }
    }
  }
}
